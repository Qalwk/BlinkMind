<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ CDN –¥–ª—è MediaPipe</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        .test-item {
            margin: 20px 0;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        .test-item.testing {
            background: #fff3cd;
            border-color: #ffc107;
        }
        .test-item.success {
            background: #d4edda;
            border-color: #28a745;
        }
        .test-item.error {
            background: #f8d7da;
            border-color: #dc3545;
        }
        .status {
            font-weight: bold;
            font-size: 18px;
        }
        .details {
            margin-top: 10px;
            font-size: 14px;
            color: #666;
        }
        .summary {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            border-radius: 5px;
        }
        .recommendation {
            margin-top: 20px;
            padding: 15px;
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            border-radius: 5px;
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }
        button:hover {
            background: #5568d3;
        }
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0,0,0,.1);
            border-radius: 50%;
            border-top-color: #667eea;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ CDN –¥–ª—è MediaPipe</h1>
        <p>–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö CDN –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ MediaPipe.</p>
        
        <div id="tests">
            <div class="test-item" id="test-unpkg-facemesh">
                <div class="status">‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ unpkg.com (Face Mesh)...</div>
                <div class="details">–ó–∞–≥—Ä—É–∑–∫–∞ https://unpkg.com/@mediapipe/face_mesh@0.4.1633559619/face_mesh.js</div>
            </div>
            
            <div class="test-item" id="test-unpkg-camera">
                <div class="status">‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ unpkg.com (Camera Utils)...</div>
                <div class="details">–ó–∞–≥—Ä—É–∑–∫–∞ https://unpkg.com/@mediapipe/camera_utils@0.3.1632432234/camera_utils.js</div>
            </div>
            
            <div class="test-item" id="test-jsdelivr-facemesh">
                <div class="status">‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ jsdelivr.net (Face Mesh)...</div>
                <div class="details">–ó–∞–≥—Ä—É–∑–∫–∞ https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js</div>
            </div>
            
            <div class="test-item" id="test-jsdelivr-camera">
                <div class="status">‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ jsdelivr.net (Camera Utils)...</div>
                <div class="details">–ó–∞–≥—Ä—É–∑–∫–∞ https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js</div>
            </div>
        </div>
        
        <div class="summary" id="summary" style="display: none;">
            <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h3>
            <div id="summary-content"></div>
        </div>
        
        <div class="recommendation" id="recommendation" style="display: none;">
            <h3>üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</h3>
            <div id="recommendation-content"></div>
        </div>
        
        <button onclick="runTests()">üîÑ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ</button>
    </div>
    
    <script>
        const tests = [
            {
                id: 'test-unpkg-facemesh',
                name: 'unpkg.com - Face Mesh',
                url: 'https://unpkg.com/@mediapipe/face_mesh@0.4.1633559619/face_mesh.js',
                cdn: 'unpkg'
            },
            {
                id: 'test-unpkg-camera',
                name: 'unpkg.com - Camera Utils',
                url: 'https://unpkg.com/@mediapipe/camera_utils@0.3.1632432234/camera_utils.js',
                cdn: 'unpkg'
            },
            {
                id: 'test-jsdelivr-facemesh',
                name: 'jsdelivr.net - Face Mesh',
                url: 'https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js',
                cdn: 'jsdelivr'
            },
            {
                id: 'test-jsdelivr-camera',
                name: 'jsdelivr.net - Camera Utils',
                url: 'https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js',
                cdn: 'jsdelivr'
            }
        ];
        
        let results = {};
        
        async function testUrl(test) {
            const startTime = Date.now();
            const element = document.getElementById(test.id);
            element.className = 'test-item testing';
            
            try {
                const response = await fetch(test.url, { 
                    method: 'HEAD',
                    mode: 'no-cors' // –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å CORS –æ—à–∏–±–æ–∫
                });
                
                const loadTime = Date.now() - startTime;
                
                element.className = 'test-item success';
                element.innerHTML = `
                    <div class="status">‚úÖ ${test.name} - –î–æ—Å—Ç—É–ø–µ–Ω</div>
                    <div class="details">–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞: ${loadTime}–º—Å</div>
                `;
                
                return { success: true, time: loadTime };
            } catch (error) {
                const loadTime = Date.now() - startTime;
                
                element.className = 'test-item error';
                element.innerHTML = `
                    <div class="status">‚ùå ${test.name} - –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω</div>
                    <div class="details">–û—à–∏–±–∫–∞: ${error.message || '–¢–∞–π–º–∞—É—Ç –∏–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞'}</div>
                `;
                
                return { success: false, error: error.message };
            }
        }
        
        async function runTests() {
            // –°–±—Ä–æ—Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            results = {};
            document.getElementById('summary').style.display = 'none';
            document.getElementById('recommendation').style.display = 'none';
            
            // –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
            for (const test of tests) {
                results[test.cdn] = results[test.cdn] || { success: 0, fail: 0 };
                const result = await testUrl(test);
                
                if (result.success) {
                    results[test.cdn].success++;
                } else {
                    results[test.cdn].fail++;
                }
                
                // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            showSummary();
        }
        
        function showSummary() {
            const summaryDiv = document.getElementById('summary');
            const summaryContent = document.getElementById('summary-content');
            const recommendationDiv = document.getElementById('recommendation');
            const recommendationContent = document.getElementById('recommendation-content');
            
            summaryDiv.style.display = 'block';
            recommendationDiv.style.display = 'block';
            
            let summaryHTML = '';
            let unpkgWorks = results.unpkg.success > 0;
            let jsdelivrWorks = results.jsdelivr.success > 0;
            
            summaryHTML += `<p><strong>unpkg.com:</strong> ${results.unpkg.success} —É—Å–ø–µ—à–Ω–æ, ${results.unpkg.fail} –Ω–µ—É–¥–∞—á–Ω–æ</p>`;
            summaryHTML += `<p><strong>jsdelivr.net:</strong> ${results.jsdelivr.success} —É—Å–ø–µ—à–Ω–æ, ${results.jsdelivr.fail} –Ω–µ—É–¥–∞—á–Ω–æ</p>`;
            
            summaryContent.innerHTML = summaryHTML;
            
            // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
            let recommendationHTML = '';
            
            if (unpkgWorks && jsdelivrWorks) {
                recommendationHTML = `
                    <p>‚úÖ <strong>–û—Ç–ª–∏—á–Ω–æ!</strong> –û–±–∞ CDN –¥–æ—Å—Ç—É–ø–Ω—ã.</p>
                    <p>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –ø—Ä–æ–±–ª–µ–º. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:</p>
                    <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">
npm run build
npm run electron:build</pre>
                `;
            } else if (unpkgWorks && !jsdelivrWorks) {
                recommendationHTML = `
                    <p>‚úÖ <strong>–•–æ—Ä–æ—à–æ!</strong> unpkg.com –¥–æ—Å—Ç—É–ø–µ–Ω (–æ—Å–Ω–æ–≤–Ω–æ–π CDN).</p>
                    <p>jsdelivr.net –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –Ω–æ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ. –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç unpkg.com.</p>
                    <p>–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∏ –≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.</p>
                `;
            } else if (!unpkgWorks && jsdelivrWorks) {
                recommendationHTML = `
                    <p>‚ö†Ô∏è <strong>–í–Ω–∏–º–∞–Ω–∏–µ!</strong> unpkg.com –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–æ jsdelivr.net —Ä–∞–±–æ—Ç–∞–µ—Ç.</p>
                    <p>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ jsdelivr).</p>
                    <p>–ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (2 —Å–µ–∫—É–Ω–¥—ã) –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.</p>
                `;
            } else {
                recommendationHTML = `
                    <p>‚ùå <strong>–ü—Ä–æ–±–ª–µ–º–∞!</strong> –û–±–∞ CDN –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.</p>
                    <p><strong>–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:</strong></p>
                    <ul>
                        <li>–ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</li>
                        <li>CDN –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã —Ñ–∞–π—Ä–≤–æ–ª–æ–º/–∞–Ω—Ç–∏–≤–∏—Ä—É—Å–æ–º</li>
                        <li>CDN –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –≤ –≤–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ</li>
                    </ul>
                    <p><strong>–†–µ—à–µ–Ω–∏—è:</strong></p>
                    <ol>
                        <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ VPN –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</li>
                        <li>–û—Ç–∫–ª—é—á–∏—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª/–∞–Ω—Ç–∏–≤–∏—Ä—É—Å –≤—Ä–µ–º–µ–Ω–Ω–æ</li>
                        <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã MediaPipe (—Å–º. CDN_FIX.md)</li>
                    </ol>
                `;
            }
            
            recommendationContent.innerHTML = recommendationHTML;
        }
        
        // –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', () => {
            setTimeout(runTests, 500);
        });
    </script>
</body>
</html>

