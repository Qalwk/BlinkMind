# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° FocusTracker

## ĞĞ±Ğ·Ğ¾Ñ€

FocusTracker Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½ Ğ½Ğ° Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ğµ **Ğ´Ğ²ÑƒÑ…Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹ Electron** Ğ´Ğ»Ñ Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡ĞµĞ½Ğ¸Ñ Ğ½ĞµĞ¿Ñ€ĞµÑ€Ñ‹Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ñ„Ğ¾Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³Ğ°.

## Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Electron Main Process                      â”‚
â”‚                         (main.js)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Main Window   â”‚                 â”‚  Tracker Window    â”‚  â”‚
â”‚  â”‚  (visible)     â”‚â—„â”€â”€â”€â”€IPCâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  (hidden)          â”‚  â”‚
â”‚  â”‚                â”‚                 â”‚                    â”‚  â”‚
â”‚  â”‚  Renderer:     â”‚                 â”‚  Renderer:         â”‚  â”‚
â”‚  â”‚  - React App   â”‚                 â”‚  - MediaPipe       â”‚  â”‚
â”‚  â”‚  - UI/UX       â”‚                 â”‚  - Face Tracking   â”‚  â”‚
â”‚  â”‚  - Zustand     â”‚                 â”‚  - Camera Access   â”‚  â”‚
â”‚  â”‚                â”‚                 â”‚                    â”‚  â”‚
â”‚  â”‚  Preload:      â”‚                 â”‚  Preload:          â”‚  â”‚
â”‚  â”‚  - electronAPI â”‚                 â”‚  - trackerAPI      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â–²                                     â”‚              â”‚
â”‚         â”‚                                     â”‚              â”‚
â”‚         â”‚       backgroundThrottling: false â”€â”€â”˜              â”‚
â”‚         â”‚       (ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ Ğ´Ğ»Ñ Ñ„Ğ¾Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ°)              â”‚
â”‚         â”‚                                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚    â”‚  Tray Icon â”‚ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)                            â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

### 1. Ğ”Ğ²ÑƒÑ…Ğ¾ĞºĞ¾Ğ½Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

#### Main Window (UI Window)
- **Ğ Ğ¾Ğ»ÑŒ:** ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
- **Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸:** React, Zustand, TypeScript
- **ĞœĞ¾Ğ¶Ğ½Ğ¾:** Ğ¡Ğ²Ğ¾Ñ€Ğ°Ñ‡Ğ¸Ğ²Ğ°Ñ‚ÑŒ, ÑĞºÑ€Ñ‹Ğ²Ğ°Ñ‚ÑŒ, Ğ·Ğ°ĞºÑ€Ñ‹Ğ²Ğ°Ñ‚ÑŒ
- **Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
  - ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº
  - Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³Ğ°
  - ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
  - Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸

#### Tracker Window (Background Window)
- **Ğ Ğ¾Ğ»ÑŒ:** ĞĞµĞ¿Ñ€ĞµÑ€Ñ‹Ğ²Ğ½Ñ‹Ğ¹ Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³ Ğ»Ğ¸Ñ†Ğ°
- **Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸:** MediaPipe Face Mesh, Camera API
- **Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ:** Ğ’ÑĞµĞ³Ğ´Ğ° ÑĞºÑ€Ñ‹Ñ‚Ğ¾ (show: false)
- **ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°:**
```javascript
webPreferences: {
  backgroundThrottling: false // ĞÑ‚ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ throttling!
}
```
- **Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
  - Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ²ĞµĞ±-ĞºĞ°Ğ¼ĞµÑ€Ğµ
  - ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ»Ğ¸Ñ†Ğ° Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
  - ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ‡ĞµÑ€ĞµĞ· IPC

### 2. IPC Communication

```
Main Window â†’ Main Process â†’ Tracker Window
     â”‚                              â”‚
     â”‚  start-tracking             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚  settings-update            â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                              â”‚
     â”‚                              â”‚
     â”‚  tracker-data               â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚  camera-status              â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚  tracker-error              â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

**Events Ğ¾Ñ‚ UI â†’ Tracker:**
- `start-tracking`: ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³ Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ğ¼Ğ¸
- `stop-tracking`: ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³
- `settings-update`: ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸

**Events Ğ¾Ñ‚ Tracker â†’ UI:**
- `tracker-data`: Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³Ğ° (ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ĞºĞ°Ğ´Ñ€)
- `camera-status`: Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ĞºĞ°Ğ¼ĞµÑ€Ñ‹
- `tracker-error`: ĞÑˆĞ¸Ğ±ĞºĞ¸

### 3. FSD (Feature-Sliced Design) ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

```
src/
â”œâ”€â”€ app/                           # Ğ¡Ğ»Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
â”‚   â””â”€â”€ providers/                 # ĞŸÑ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ñ‹
â”‚       â””â”€â”€ useElectronIntegration # Ğ¥ÑƒĞº Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Electron
â”‚
â”œâ”€â”€ pages/                         # Ğ¡Ğ»Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†
â”‚   â””â”€â”€ workspace/                 # Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°
â”‚       â””â”€â”€ ui/MainWorkspace       # ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
â”‚
â”œâ”€â”€ widgets/                       # Ğ¡Ğ»Ğ¾Ğ¹ Ğ²Ğ¸Ğ´Ğ¶ĞµÑ‚Ğ¾Ğ²
â”‚   â”œâ”€â”€ camera-stream/             # Ğ’Ğ¸Ğ´Ğ¶ĞµÑ‚ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”‚   â””â”€â”€ ui/CameraStream        # UI Ğ²Ğ¸Ğ´Ğ¶ĞµÑ‚Ğ°
â”‚   â””â”€â”€ settings-panel/            # Ğ’Ğ¸Ğ´Ğ¶ĞµÑ‚ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº
â”‚       â””â”€â”€ ui/SettingsPanel       # UI Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº
â”‚
â”œâ”€â”€ features/                      # Ğ¡Ğ»Ğ¾Ğ¹ Ñ„Ğ¸Ñ‡
â”‚   â””â”€â”€ face-tracking/             # Ğ¤Ğ¸Ñ‡Ğ° Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³Ğ° Ğ»Ğ¸Ñ†Ğ°
â”‚       â””â”€â”€ lib/face-tracker.ts    # Ğ¡ĞµÑ€Ğ²Ğ¸Ñ MediaPipe
â”‚
â”œâ”€â”€ entities/                      # Ğ¡Ğ»Ğ¾Ğ¹ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ĞµĞ¹
â”‚   â””â”€â”€ tracking-session/          # Ğ¡ÑƒÑ‰Ğ½Ğ¾ÑÑ‚ÑŒ ÑĞµÑÑĞ¸Ğ¸
â”‚       â””â”€â”€ model/store.ts         # Zustand store
â”‚
â””â”€â”€ shared/                        # ĞĞ±Ñ‰Ğ¸Ğ¹ ÑĞ»Ğ¾Ğ¹
    â”œâ”€â”€ api/                       # API
    â”‚   â””â”€â”€ electron-api.ts        # ĞĞ±ĞµÑ€Ñ‚ĞºĞ° Electron API
    â””â”€â”€ types/                     # Ğ¢Ğ¸Ğ¿Ñ‹
        â”œâ”€â”€ tracking.types.ts      # Ğ¢Ğ¸Ğ¿Ñ‹ Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³Ğ°
        â””â”€â”€ electron.types.ts      # Ğ¢Ğ¸Ğ¿Ñ‹ Electron
```

### 4. ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Camera    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Video Stream
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MediaPipe          â”‚
â”‚  Face Mesh          â”‚
â”‚  (Tracker Window)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 468 Landmarks
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FaceTracker        â”‚
â”‚  Service            â”‚
â”‚  - analyzeBlinking  â”‚
â”‚  - analyzeHeadPose  â”‚
â”‚  - analyzeEngagementâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ TrackingData
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IPC Channel        â”‚
â”‚  (tracker-data)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Main Window        â”‚
â”‚  (UI Process)       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Zustand Store      â”‚
â”‚  (useTrackingStore) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React Components   â”‚
â”‚  - CameraStream     â”‚
â”‚  - SettingsPanel    â”‚
â”‚  - MainWorkspace    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ñ‹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°

### Eye Aspect Ratio (EAR) - ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¼Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ¹

```javascript
EAR = (vertical1 + vertical2) / (2 * horizontal)

// ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ‚Ğ¾Ñ‡ĞºĞ¸ MediaPipe Ğ´Ğ»Ñ Ğ³Ğ»Ğ°Ğ·:
// ĞŸÑ€Ğ°Ğ²Ñ‹Ğ¹ Ğ³Ğ»Ğ°Ğ·: 33, 160, 158, 133, 153, 144
// Ğ›ĞµĞ²Ñ‹Ğ¹ Ğ³Ğ»Ğ°Ğ·: 362, 385, 387, 263, 373, 380

if (EAR < threshold) {
  // ĞœĞ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğµ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¾
  blinkCount++
}
```

**ĞĞ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ EAR:** ~0.25-0.35  
**ĞŸÑ€Ğ¸ Ğ¼Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ¸:** < 0.2  
**ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ğ² UI**

### Head Pose Estimation - ĞŸĞ¾Ğ·Ğ° Ğ³Ğ¾Ğ»Ğ¾Ğ²Ñ‹

```javascript
// ĞĞ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… Ñ‚Ğ¾Ñ‡ĞµĞº Ğ»Ğ¸Ñ†Ğ°:
// ĞĞ¾Ñ: 1, ĞŸĞ¾Ğ´Ğ±Ğ¾Ñ€Ğ¾Ğ´Ğ¾Ğº: 152
// Ğ›ĞµĞ²Ğ¾Ğµ ÑƒÑ…Ğ¾: 234, ĞŸÑ€Ğ°Ğ²Ğ¾Ğµ ÑƒÑ…Ğ¾: 454

Yaw (Ğ¿Ğ¾Ğ²Ğ¾Ñ€Ğ¾Ñ‚) = f(rightEar.x - leftEar.x)
Pitch (Ğ½Ğ°ĞºĞ»Ğ¾Ğ½) = f(nose.y - chin.y)  
Roll (Ğ½Ğ°ĞºĞ»Ğ¾Ğ½) = atan2(rightEar.y - leftEar.y, rightEar.x - leftEar.x)
```

**Ğ”Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ñ‹:**
- Yaw: -90Â° Ğ´Ğ¾ +90Â° (Ğ²Ğ»ĞµĞ²Ğ¾/Ğ²Ğ¿Ñ€Ğ°Ğ²Ğ¾)
- Pitch: -90Â° Ğ´Ğ¾ +90Â° (Ğ²Ğ²ĞµÑ€Ñ…/Ğ²Ğ½Ğ¸Ğ·)
- Roll: -90Â° Ğ´Ğ¾ +90Â° (Ğ½Ğ°ĞºĞ»Ğ¾Ğ½ Ğ³Ğ¾Ğ»Ğ¾Ğ²Ñ‹)

### Engagement Level - Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸

```javascript
let engagement = 0

// Ğ›Ğ¸Ñ†Ğ¾ Ğ¿Ğ¾ Ñ†ĞµĞ½Ñ‚Ñ€Ñƒ? +40%
if (nose.x > 0.3 && nose.x < 0.7 && nose.y > 0.3 && nose.y < 0.7) {
  engagement += 40
}

// Ğ’Ğ·Ğ³Ğ»ÑĞ´ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½? +40%
if (abs(yaw) < yawThreshold && abs(pitch) < pitchThreshold) {
  engagement += 40
}

// ĞĞ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° Ğ¼Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ¹? +20%
if (blinkRate > 10 && blinkRate < 30) {
  engagement += 20
}

return engagement // 0-100%
```

**ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ:**
- 80-100%: Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ (Ğ·ĞµĞ»ĞµĞ½Ñ‹Ğ¹)
- 40-79%: Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ (Ğ¾Ñ€Ğ°Ğ½Ğ¶ĞµĞ²Ñ‹Ğ¹)
- 0-39%: ĞĞ¸Ğ·ĞºĞ°Ñ Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ (ĞºÑ€Ğ°ÑĞ½Ñ‹Ğ¹)

## ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸

### Adaptive Frame Rate

```javascript
// ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼ (Ğ¾ĞºĞ½Ğ¾ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾)
FPS = settings.fpsActive // Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ: 30

// Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼ (Ğ¾ĞºĞ½Ğ¾ ÑĞºÑ€Ñ‹Ñ‚Ğ¾)
FPS = settings.fpsBackground // Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ: 15
```

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:**
- Ğ¡Ğ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ CPU usage Ğ² Ñ„Ğ¾Ğ½Ğµ Ğ½Ğ° 40-50%
- Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ Ğ±Ğ°Ñ‚Ğ°Ñ€ĞµĞ¸
- Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°

### Throttling Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```javascript
// ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ‡ĞµÑ€ĞµĞ· IPC Ğ½Ğµ Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ ĞºĞ°Ğ´Ñ€Ğµ
// Ğ° Ñ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»Ğ¾Ğ¼ (debounce/throttle)

// Ğ”Ğ»Ñ MetricUpdates: ĞºĞ°Ğ¶Ğ´ÑƒÑ ÑĞµĞºÑƒĞ½Ğ´Ñƒ
// Ğ”Ğ»Ñ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸: ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ĞºĞ°Ğ´Ñ€ (30/15 FPS)
```

### Memory Management

```javascript
// Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ñ… N Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹
maxHistoryLength: 1000 // ~33 ÑĞµĞºÑƒĞ½Ğ´Ñ‹ Ğ¿Ñ€Ğ¸ 30 FPS

// ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ° ÑÑ‚Ğ°Ñ€Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
if (dataHistory.length > maxHistoryLength) {
  dataHistory.shift()
}
```

## Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### Context Isolation

```javascript
// Ğ’ÑĞµ IPC Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· contextBridge
contextBridge.exposeInMainWorld('electronAPI', {
  // Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹
  startTracking: (settings) => ipcRenderer.send('start-tracking', settings),
  // ĞĞ¸ĞºĞ°ĞºĞ¾Ğ³Ğ¾ Ğ¿Ñ€ÑĞ¼Ğ¾Ğ³Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº ipcRenderer
})
```

### Permissions

- Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ĞºĞ°Ğ¼ĞµÑ€Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµÑ‚ÑÑ ÑĞ²Ğ½Ğ¾
- ĞĞ¸ĞºĞ°ĞºĞ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ½Ğµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‚ÑÑ Ğ² Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚
- Ğ’ÑĞµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ

## ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„Ğ¸Ñ‡

Ğ‘Ğ»Ğ°Ğ³Ğ¾Ğ´Ğ°Ñ€Ñ FSD Ğ»ĞµĞ³ĞºĞ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ:
- ĞĞ¾Ğ²Ñ‹Ğµ Ğ²Ğ¸Ğ´Ğ¶ĞµÑ‚Ñ‹ Ğ² `widgets/`
- ĞĞ¾Ğ²Ñ‹Ğµ Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ñ‹ Ğ² `features/`
- ĞĞ¾Ğ²Ñ‹Ğµ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ² `entities/`

### Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ backend

```javascript
// Ğ’ entities/tracking-session/model/store.ts
stopSession: async () => {
  // ...
  // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² Supabase / API
  await saveSessionToBackend(finishedSession)
}
```

### ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½Ğ¾Ğ²

ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ Ğ»ĞµĞ³ĞºĞ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ:
- Ğ Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ AI Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°
- Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ ĞºĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑĞ¼Ğ¸
- Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ

## Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Unit Ñ‚ĞµÑÑ‚Ñ‹

```javascript
// Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ¾Ğ²
test('EAR calculation', () => {
  const ear = calculateEyeAspectRatio(landmarks)
  expect(ear).toBeGreaterThan(0.15)
  expect(ear).toBeLessThan(0.35)
})
```

### Integration Ñ‚ĞµÑÑ‚Ñ‹

```javascript
// Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ IPC
test('tracker data transmission', () => {
  electronAPI.onTrackerData((data) => {
    expect(data.faceDetected).toBeDefined()
    expect(data.blink).toBeDefined()
  })
})
```

### E2E Ñ‚ĞµÑÑ‚Ñ‹

Ğ¡Ğ¼. [TESTING.md](TESTING.md) Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ Ñ€ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ°.

## Deployment

### Production Build

```bash
npm run build              # Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° React app
npm run electron:build     # Electron installers
```

**Output:**
- `dist/` - React production build
- `dist-electron/` - Installers (.exe, .dmg, .AppImage)

### Code Signing

```javascript
// electron-builder config
"build": {
  "mac": {
    "identity": "Developer ID Application: ...",
    "hardenedRuntime": true
  },
  "win": {
    "certificateFile": "cert.pfx",
    "certificatePassword": "..."
  }
}
```

## ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

### Performance Metrics

```javascript
// Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ² tracker
const metrics = {
  fps: actualFPS,
  processingTime: Date.now() - startTime,
  memoryUsage: process.memoryUsage(),
  cpuUsage: process.cpuUsage()
}
```

### Error Tracking

```javascript
// Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
tracker.setOnErrorCallback((error) => {
  // Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
  console.error('[Tracker]', error)
  
  // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² Sentry / Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³
  // Sentry.captureException(error)
})
```

## Ğ—Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ

ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° FocusTracker Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡Ğ¸Ğ²Ğ°ĞµÑ‚:

âœ… **ĞĞµĞ¿Ñ€ĞµÑ€Ñ‹Ğ²Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³** Ñ‡ĞµÑ€ĞµĞ· Ğ´Ğ²ÑƒÑ…Ğ¾ĞºĞ¾Ğ½Ğ½ÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ  
âœ… **Ğ’Ñ‹ÑĞ¾ĞºÑƒÑ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ** Ñ‡ĞµÑ€ĞµĞ· adaptive FPS  
âœ… **ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ** Ñ‡ĞµÑ€ĞµĞ· FSD Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñƒ  
âœ… **Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ** Ñ‡ĞµÑ€ĞµĞ· context isolation  
âœ… **ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ñ‚Ñƒ ĞºĞ¾Ğ´Ğ°** Ğ±ĞµĞ· ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²  
âœ… **Ğ¢ĞµÑÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ** Ğ½Ğ° Ğ²ÑĞµÑ… ÑƒÑ€Ğ¾Ğ²Ğ½ÑÑ…  

---

**Ğ’Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¿Ğ¾ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğµ?** Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ discussion Ğ² Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸!


